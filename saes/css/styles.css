/* Topbar */
.topbar{height:64px; display:flex; align-items:center; justify-content:space-between; background:linear-gradient(180deg,var(--color-surface),rgba(255,255,255,0.98)); position:fixed; top:0; left:0; right:0; z-index:40; border-bottom:1px solid rgba(16,24,40,0.04)}
.topbar .container{display:flex; align-items:center; gap:16px}
.brand{display:flex; align-items:center; gap:10px; font-weight:700; color:var(--color-primary); font-size:18px}
.brand .logo{width:36px; height:36px; border-radius:8px; background:var(--color-accent); color:white; display:flex; align-items:center; justify-content:center; font-weight:700}
.topbar .search{flex:1}
.topbar .search input{width:100%; max-width:520px; padding:10px 14px; border-radius:10px; border:1px solid rgba(16,24,40,0.06); background:#fff}
.topbar .top-actions{display:flex; gap:12px; align-items:center}

/* Layout */
.layout{display:flex; padding-top:84px}
.sidebar{width:260px; background:transparent; min-height:calc(100vh - 84px); padding:20px 12px 40px 12px}
.sidebar .panel{background:var(--color-surface); border-radius:12px; padding:12px; box-shadow:var(--shadow-xs)}
.sidebar .user-mini{display:flex; gap:12px; align-items:center; margin-bottom:12px}
.avatar-lg{width:56px; height:56px; border-radius:10px; background:var(--color-primary); color:white; display:flex; align-items:center; justify-content:center; font-weight:700}
.nav{margin-top:12px}
.nav .nav-item{display:flex; align-items:center; gap:10px; padding:10px 12px; color:var(--color-text); border-radius:10px; text-decoration:none; margin:6px 0}
.nav .nav-item svg{opacity:0.9}
.nav .nav-item.active{background:linear-gradient(90deg, rgba(11,37,69,0.06), rgba(139,30,47,0.02))}

.content{flex:1; padding:24px}
.grid{display:grid; grid-template-columns: 2fr 1fr; gap:20px}
.col{display:block}
.main-col{display:flex; flex-direction:column; gap:16px}
.side-col{display:flex; flex-direction:column; gap:12px}
.card{background:var(--color-surface); border-radius:var(--radius-sm); box-shadow:var(--shadow-xs); padding:16px}
.card-header{display:flex; justify-content:space-between; align-items:center; font-weight:600}
.card-body{padding-top:10px}
.kpi-row{display:flex; gap:20px}
.kpi-label{font-size:12px; color:var(--color-muted)}
.kpi-value{font-size:22px; font-weight:700}
.table{width:100%; border-collapse:collapse; background:transparent}
.table th, .table td{padding:10px 8px; border-bottom:1px solid rgba(16,24,40,0.04); text-align:left}
.table thead th{font-weight:600; color:var(--color-primary)}

.side-col .card{margin-bottom:0}

/* Modal and toast */
.modal{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(16,24,40,0.45); z-index:60}
.modal.hidden{display:none}
.modal-card{background:var(--color-surface); border-radius:12px; padding:18px; width:360px; box-shadow:var(--shadow-sm)}
.form-row{margin-top:12px}

.toast-wrap{position:fixed; right:20px; bottom:20px; display:flex; flex-direction:column; gap:8px; z-index:80}
.toast{background:#111827; color:white; padding:10px 14px; border-radius:8px; box-shadow:var(--shadow-sm); opacity:0.98}

/* Map pins */
.map-pin{cursor:pointer; transition:transform var(--transition-fast)}
.map-pin:hover{transform:scale(1.1)}

/* Responsive */
@media (max-width:1000px){
  .grid{grid-template-columns:1fr}
  .sidebar{display:none}
  .topbar .search input{max-width:280px}
}

@media (max-width:600px){
  .topbar{padding:8px 10px}
  .brand{font-size:16px}
}
