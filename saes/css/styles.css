/* Topbar */

.topbar{
  height:72px;
  display:flex; align-items:center; justify-content:space-between;
  position:fixed; top:0; left:0; right:0; z-index:40;
  padding:0 var(--space-4);
  backdrop-filter: blur(10px);
  background: linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.56));
  border-bottom: 1px solid var(--glass-border);
  box-shadow: var(--shadow-sm);
}
.topbar .container{display:flex; align-items:center; gap:18px}
.brand{display:flex; align-items:center; gap:12px; font-weight:700; color:var(--color-text); font-size:18px}
.brand .logo{width:40px; height:40px; border-radius:10px; background:linear-gradient(180deg,var(--color-accent), var(--color-accent-2)); color:white; display:flex; align-items:center; justify-content:center; font-weight:700}
.topbar .search{flex:1}
.topbar .search input{width:100%; max-width:520px; padding:10px 14px; border-radius:12px; border:1px solid var(--glass-border); background:rgba(255,255,255,0.9)}
.topbar .top-actions{display:flex; gap:12px; align-items:center}

/* Page background logo (subtle, non-interactive) */
html, body{height:100%;}
body::before{
  content: '';
  position: fixed;
  inset: 0;
  background-image: url('../logo.jpeg');
  background-repeat: no-repeat;
  background-position: center center; /* center the image */
  background-size: cover; /* scale to cover entire viewport */
  background-attachment: fixed;
  opacity: var(--bg-opacity, 0.12); /* use variable for easy tuning */
  pointer-events: none;
  z-index: -1; /* ensure it stays behind all app content */
  filter: saturate(0.95) contrast(0.95) brightness(0.98);
  will-change: opacity, transform;
}

/* In auth-only (login) view show the background slightly stronger */
body.auth-only::before{opacity: calc(var(--bg-opacity, 0.12) + 0.04)}

/* Layout */
.layout{display:flex; padding-top:84px}
.sidebar{width:260px; background:transparent; min-height:calc(100vh - 84px); padding:20px 12px 40px 12px}
.sidebar .panel{background:var(--color-surface); border-radius:12px; padding:12px; box-shadow:var(--shadow-xs)}
.sidebar .user-mini{display:flex; gap:12px; align-items:center; margin-bottom:12px}
.avatar-lg{width:56px; height:56px; border-radius:10px; background:var(--color-primary); color:white; display:flex; align-items:center; justify-content:center; font-weight:700}
.nav{margin-top:12px}
.nav .nav-item{display:flex; align-items:center; gap:12px; padding:10px 14px; color:var(--color-text); border-radius:10px; text-decoration:none; margin:8px 0; cursor:pointer; transition:background var(--transition-fast), transform var(--transition-fast)}
.nav .nav-item svg{opacity:0.95; width:18px; height:18px}
.nav .nav-item:hover{background:linear-gradient(90deg, rgba(139,30,47,0.06), rgba(11,37,69,0.02)); transform:translateX(4px)}
.nav .nav-item:focus{outline:3px solid rgba(139,30,47,0.12); outline-offset:2px}
.nav .nav-item.active{background:linear-gradient(90deg, rgba(139,30,47,0.12), rgba(11,37,69,0.04)); box-shadow:var(--shadow-xs)}

.content{flex:1; padding:24px}
.grid{display:grid; grid-template-columns: 2fr 1fr; gap:20px}
.col{display:block}
.main-col{display:flex; flex-direction:column; gap:16px}
.side-col{display:flex; flex-direction:column; gap:12px}
.card{background:var(--color-surface); border-radius:var(--radius-sm); box-shadow:var(--shadow-xs); padding:16px}
.welcome-card{display:flex; align-items:center; justify-content:space-between; padding:18px; border-left:4px solid var(--color-accent); background: linear-gradient(90deg, rgba(11,37,69,0.02), var(--color-surface)); box-shadow:0 18px 40px rgba(11,37,69,0.06);}
.welcome-inner{display:flex; align-items:center; justify-content:space-between; gap:24px; width:100%}
.welcome-left{flex:1}
.welcome-title{font-size:20px; color:var(--color-primary); font-weight:700}
.welcome-sub{color:var(--color-muted); margin-top:6px}
.welcome-actions{display:flex; gap:10px; margin-top:12px}
.welcome-right{display:flex; gap:14px; align-items:center}
.welcome-avatar{width:64px; height:64px; border-radius:10px; background:var(--color-accent); color:#fff; display:flex; align-items:center; justify-content:center; font-weight:700; font-size:18px}
.welcome-stats .kpi-value{font-size:18px}

/* Entrance animation for welcome card */
.welcome-card{opacity:0; transform:translateY(14px) scale(0.995); transition:opacity 520ms cubic-bezier(.2,.9,.2,1), transform 520ms cubic-bezier(.2,.9,.2,1)}
.welcome-card.animate-in{opacity:1; transform:none}

/* Responsive tweak */
@media (max-width:900px){
  .welcome-inner{flex-direction:column; align-items:flex-start}
  .welcome-right{align-self:stretch; display:flex; justify-content:space-between; width:100%}
}
.card-header{display:flex; justify-content:space-between; align-items:center; font-weight:600}
.card-body{padding-top:10px}
.kpi-row{display:flex; gap:20px}
.kpi-label{font-size:12px; color:var(--color-muted)}
.kpi-value{font-size:22px; font-weight:700}
.table{width:100%; border-collapse:collapse; background:transparent}
.table th, .table td{padding:10px 8px; border-bottom:1px solid rgba(16,24,40,0.04); text-align:left}
.table thead th{font-weight:600; color:var(--color-primary)}

.side-col .card{margin-bottom:0}

/* Modal and toast */
.modal{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(16,24,40,0.45); z-index:60}
.modal.hidden{display:none}
.modal-card{background:var(--color-surface); border-radius:12px; padding:18px; width:360px; box-shadow:var(--shadow-sm)}
.form-row{margin-top:12px}

.toast-wrap{position:fixed; right:20px; bottom:20px; display:flex; flex-direction:column; gap:8px; z-index:80}
.toast{background:#111827; color:white; padding:10px 14px; border-radius:8px; box-shadow:var(--shadow-sm); opacity:0.98}

/* Map pins */
.map-pin{cursor:pointer; transition:transform var(--transition-fast)}
.map-pin:hover{transform:scale(1.1)}

/* Forms: inputs, selects, textarea */
.form-label{display:block; font-size:13px; font-weight:500; margin-bottom:6px}
.form-control{width:100%; padding:10px 12px; border-radius:8px; border:1px solid rgba(16,24,40,0.06); background:var(--color-surface); transition:box-shadow var(--transition-fast), border-color var(--transition-fast)}
.form-control:focus{outline:none; box-shadow:0 4px 12px rgba(11,37,69,0.06); border-color:var(--color-accent)}
.form-grid{display:grid; grid-template-columns:1fr 1fr; gap:12px}
.form-grid .form-row{margin-top:0}
.form-actions{display:flex; gap:8px; align-items:center}

/* Tables: improved readability */
.table-responsive{overflow:auto; border-radius:10px;}
.table tbody tr:nth-child(even){background:rgba(16,24,40,0.02)}
.table tbody tr:hover{background:rgba(11,37,69,0.03)}
.table .badge{background:transparent; color:var(--color-primary); border:1px solid rgba(11,37,69,0.06); padding:4px 8px; border-radius:999px}

/* Inputs inside cards spacing */
.card .form-row{margin-top:10px}

/* Small helpers */
.text-muted{color:var(--color-muted); font-size:13px}
.muted-small{color:var(--color-muted); font-size:12px}

/* Responsive */
@media (max-width:1000px){
  .grid{grid-template-columns:1fr}
  .sidebar{display:none}
  .topbar .search input{max-width:280px}
}

@media (max-width:600px){
  .topbar{padding:8px 10px}
  .brand{font-size:16px}
}

/* View visibility control */
.view{opacity:0; visibility:hidden; transform:translateY(6px); transition:opacity 320ms ease, transform 320ms ease, visibility 320ms;}
.view.active{opacity:1; visibility:visible; transform:none}

/* Crossfade helper: when enabled, stack views for overlapping crossfade */
.content.crossfade-enabled{position:relative}
.content.crossfade-enabled .view{position:absolute; inset:0}
.view.fade-out{opacity:0; visibility:hidden; transform:translateY(6px)}
.view.fade-in{opacity:1; visibility:visible; transform:none}

/* Auth-only mode: hide navigation and top actions to focus on login */
body.auth-only .layout{display:block}
body.auth-only .sidebar{display:none !important}
body.auth-only .topbar .top-actions{display:none}
body.auth-only .container{max-width:680px}
body.auth-only #content{padding:40px 0}

/* When in auth-only mode hide the entire topbar (brand/search) so only the login card remains */
body.auth-only .topbar{display:none !important}
/* Make the page center the login hero fully when auth-only */
body.auth-only .layout{padding-top:0}
body.auth-only .login-hero{min-height:100vh; display:flex; align-items:center; justify-content:center}

/* Center login card when auth-only */
body.auth-only #view-login .card{margin:80px auto}

/* Login page specific styles: elegant card */
.login-hero{display:flex; gap:40px; align-items:center; justify-content:center; padding:40px}
.login-illustration{width:48%; max-width:360px; display:flex; align-items:center; justify-content:center}
.login-illustration img{max-width:100%; border-radius:12px}
.login-card-wrap{width:420px}
.login-card{padding:28px; border-radius:14px; box-shadow:var(--shadow-sm); background:linear-gradient(180deg, var(--color-surface), #fbfbfb)}
.login-brand{display:flex; align-items:center; gap:12px; margin-bottom:16px}
.login-brand .logo{width:46px; height:46px}
.login-title{font-size:20px; font-weight:700; color:var(--color-primary); margin-bottom:6px}
.login-sub{color:var(--color-muted); font-size:13px; margin-bottom:16px}
.input-group{position:relative}
.input-icon{position:absolute; left:10px; top:50%; transform:translateY(-50%); opacity:0.6}
.form-control.with-icon{padding-left:38px}
.field-error{color:var(--danger); font-size:12px; margin-top:6px}
.remember-row{display:flex; align-items:center; justify-content:space-between; margin-top:8px}
.login-actions{display:flex; gap:12px; margin-top:18px}
.btn.primary{background:var(--color-primary)}
.btn.secondary{background:transparent; border:1px solid rgba(16,24,40,0.06); color:var(--color-primary)}
.login-footer{margin-top:16px; font-size:13px; color:var(--color-muted)}

@media (max-width:900px){
  .login-hero{flex-direction:column; gap:18px; padding:20px}
  .login-illustration{width:100%}
  .login-card-wrap{width:100%}
}

/* Entrance animation for login card */
.login-card{opacity:0; transform:translateY(18px) scale(0.995); transition:opacity 420ms cubic-bezier(.2,.9,.2,1), transform 420ms cubic-bezier(.2,.9,.2,1)}
.login-card.animate-in{opacity:1; transform:translateY(0) scale(1)}

/* subtle hover */
.login-card:hover{box-shadow:0 26px 50px rgba(11,37,69,0.14); transform:translateY(-3px) scale(1.002);}

/* Minimal modern login card (semi-transparent + blur) */
.login-hero{display:flex; align-items:center; justify-content:center; padding:48px 16px; min-height:calc(100vh - 120px)}
.login-card.minimal{
  width:360px; min-height:420px; border-radius:var(--radius-lg);
  padding:22px 20px; display:flex; flex-direction:column; justify-content:center;
  background: linear-gradient(180deg, var(--glass-overlay), rgba(255,255,255,0.92));
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-lg);
}
.login-card.minimal .login-brand{display:flex; flex-direction:column; align-items:center; gap:6px; margin-bottom:8px}
.login-card.minimal .login-title{font-size:30px; font-weight:700; letter-spacing:6px; color:var(--color-text); margin:0; text-align:center; line-height:1}
.login-card.minimal .login-sub{font-size:12px; color:var(--color-muted); margin:0; max-width:260px; text-align:center; line-height:1.15; opacity:0.95}
.login-card.minimal .card-body{padding-top:8px; display:flex; flex-direction:column; align-items:stretch}
.login-card.minimal .form-row{margin-bottom:12px}
.login-card.minimal .form-control{border-radius:12px; padding:12px 14px; border:1px solid var(--glass-border); background:rgba(255,255,255,0.7); box-shadow:none; color:var(--color-text)}

/* Animated welcome letters */
.animated-welcome{display:flex; justify-content:center; margin-bottom:8px; min-height:34px}
.animated-welcome .letter{display:inline-block; opacity:0; transform:translateY(8px) scale(0.98); color:var(--color-primary); font-weight:600; font-size:14px}
.animated-welcome.play .letter{animation:popIn 420ms cubic-bezier(.2,.9,.2,1) forwards}

@keyframes popIn{
  0%{opacity:0; transform:translateY(8px) scale(0.98)}
  60%{opacity:1; transform:translateY(-2px) scale(1.02)}
  100%{opacity:1; transform:translateY(0) scale(1)}
}

/* small spacing for punctuation and spaces */
.animated-welcome .letter.space{width:6px}

@media (prefers-reduced-motion: reduce){
  .animated-welcome .letter{opacity:1; transform:none; animation:none}
}

/* Page-level welcome appearance (outside card) */
.animated-welcome.page{margin:20px 0 6px; min-height:40px}
.animated-welcome.page .letter{font-size:32px; color:var(--color-primary-2); letter-spacing:1px; font-family: 'Playfair Display', serif; font-weight:600}
.login-card.minimal .form-control::placeholder{color:var(--color-muted)}
.login-card.minimal .login-actions{display:flex; justify-content:center}
.login-card.minimal .btn{border-radius:999px; padding:10px 18px; background:var(--color-accent); color:#fff; box-shadow:0 10px 30px rgba(139,30,47,0.10); border:0; font-weight:600}
.login-card.minimal .btn:hover{transform:translateY(-2px); box-shadow:0 18px 40px rgba(139,30,47,0.12)}

/* small utility to hide labels visually but keep accessible */
.visually-hidden{position:absolute !important; height:1px; width:1px; overflow:hidden; clip:rect(1px, 1px, 1px, 1px); white-space:nowrap}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce){
  .login-card, .login-card.animate-in, .view { transition: none !important; animation: none !important; }
}

/* Remove backdrop blur while hovering the login card to keep content crisp on hover */
.login-card.minimal:hover{
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;
}

/* --- Page-level welcome (big elegant letters outside login) --- */
.page-welcome{position:fixed; top:8vh; left:0; right:0; display:flex; justify-content:center; align-items:center; pointer-events:none; z-index:30}
.page-welcome .welcome-inner{display:flex; gap:6px; align-items:flex-end}
.page-welcome .letter{font-family: 'Playfair Display', serif; font-weight:700; color:var(--color-primary-2); display:inline-block; opacity:0; transform:translateY(18px) scale(0.96);}
.page-welcome .letter.large{font-size:clamp(28px, 6vw, 56px); letter-spacing:0.6px}
.page-welcome .letter.punctuation{font-size:clamp(18px, 3vw, 28px); opacity:0.9}
.page-welcome.play .letter{animation:pagePopIn 520ms cubic-bezier(.2,.9,.2,1) forwards}

@keyframes pagePopIn{
  0%{opacity:0; transform:translateY(18px) scale(0.96)}
  55%{opacity:1; transform:translateY(-6px) scale(1.04)}
  100%{opacity:1; transform:translateY(0) scale(1)}
}

/* stagger via inline style --delay */
.page-welcome .letter{animation-delay: var(--delay, 0ms)}

@media (prefers-reduced-motion: reduce){
  .page-welcome .letter{opacity:1; transform:none; animation:none}
}

