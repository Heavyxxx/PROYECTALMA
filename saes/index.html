<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>A.L.M.A. — SAES (demo)</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;600;700;900&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/design-tokens.css">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body class="auth-only">
  <div class="app-root">
    <!-- Page-level welcome (outside the login card) -->
    <div id="pageWelcome" class="page-welcome" aria-hidden="true"></div>
    <main id="content">
      <!-- ONLY LOGIN CARD -->
      <section id="view-login" class="view active" role="region" aria-label="Login">
        <div class="login-hero">
          <div class="login-card-wrap">
            <div class="login-card minimal animate-in" id="loginCard">
              <div class="animated-welcome page" id="animatedWelcomePage" aria-hidden="true"></div>

              <div class="login-brand">
                <h1 class="login-title">A.L.M.A.</h1>
                <div class="login-sub">Administración Lógica y Modular Académica</div>
              </div>

              <div class="card-body">
                <form id="loginForm">
                  <div class="form-row">
                    <label class="visually-hidden" for="loginUser">Usuario</label>
                    <input id="loginUser" class="form-control with-icon" placeholder="Usuario" autocomplete="username" required />
                  </div>
                  <div class="form-row">
                    <label class="visually-hidden" for="loginPass">Contraseña</label>
                    <input id="loginPass" type="password" class="form-control" placeholder="Contraseña" autocomplete="current-password" required />
                  </div>
                  <div class="login-actions">
                    <button type="submit" class="btn">Acceder</button>
                  </div>
                </form>
                
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- DUAL DEMO VIEW: show both student and teacher interfaces side-by-side -->
      <section id="view-dual" class="view" role="region" aria-label="Demo Dual">
        <div class="container">
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-top:28px">
            <div>
              <div class="card">
                <h3 style="margin:0 0 8px">Interfaz Estudiante (vista demo)</h3>
                <div class="text-muted">Resumen y calificaciones</div>
                <div style="margin-top:12px">
                  <div class="muted-small">GPA</div>
                  <div id="gpa_dual" style="font-weight:700; font-size:20px">—</div>
                  <div class="table-responsive" style="margin-top:12px">
                    <table class="table" id="gradesTable_dual"><thead><tr><th>Materia</th><th>Profesor</th><th>Final</th></tr></thead><tbody></tbody></table>
                  </div>
                </div>
              </div>
            </div>
            <div>
              <div class="card">
                <h3 style="margin:0 0 8px">Interfaz Docente (vista demo)</h3>
                <div class="text-muted">Captura y grupos</div>
                <div id="teacherCapture_dual" style="margin-top:12px">Cargando herramienta docente...</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- STUDENT DASHBOARD -->
      <section id="view-dashboard" class="view" role="region" aria-label="Dashboard">
        <div class="container">
          <div class="grid" style="grid-template-columns:2fr 1fr; gap:20px; margin-top:40px">
            <div class="main-col">
              <!-- Summary / KPIs -->
              <div class="card" style="display:flex; gap:18px; align-items:center; justify-content:space-between">
                <div>
                  <h2 style="margin:0 0 6px; font-size:22px">Bienvenido, <span id="userGreeting">Alumno</span></h2>
                  <div class="text-muted">Resumen académico</div>
                </div>
                <div style="display:flex; gap:12px; align-items:center">
                  <div style="text-align:center">
                    <div class="muted-small">GPA</div>
                    <div id="gpa" style="font-weight:700; font-size:20px">—</div>
                  </div>
                  <div style="text-align:center">
                    <div class="muted-small">Créditos</div>
                    <div id="credits" style="font-weight:700; font-size:20px">—</div>
                  </div>
                  <div style="text-align:center">
                    <div class="muted-small">Periodo</div>
                    <div id="currentPeriod" style="font-weight:700; font-size:20px">—</div>
                  </div>
                </div>
              </div>

              <!-- Grades table -->
              <div class="card" style="margin-top:18px">
                <div class="card-header">
                  <div style="font-weight:700">Calificaciones — Historial</div>
                  <div>
                    <button id="downloadTira" class="btn small">Exportar PDF</button>
                  </div>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table id="gradesTable" class="table">
                      <thead><tr><th>Materia</th><th>Profesor</th><th>Parciales</th><th>Final</th><th>Estado</th></tr></thead>
                      <tbody>
                        <!-- renderGrades rellenará -->
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>

              <!-- Schedule + Requests -->
              <div style="display:grid; grid-template-columns:1fr 1fr; gap:18px; margin-top:18px">
                <div class="card">
                  <div class="card-header"><div style="font-weight:700">Horario</div></div>
                  <div class="card-body" id="scheduleContent">(Horario y mapa interactivo en una versión completa)</div>
                </div>
                <div class="card">
                  <div class="card-header"><div style="font-weight:700">Trámites en línea</div></div>
                  <div class="card-body">
                    <div style="margin-bottom:8px">Solicita trámites académicos</div>
                    <div class="form-row"><select id="reqType" class="form-control"><option value="baja">Baja temporal</option><option value="constancia">Constancia</option><option value="otro">Otro</option></select></div>
                    <div class="form-row"><textarea id="reqDesc" class="form-control" rows="2" placeholder="Descripción (breve)"></textarea></div>
                    <div class="form-row"><button id="reqSubmit" class="btn small">Enviar solicitud</button></div>
                    <div id="reqResult" class="muted-small mt-8"></div>
                  </div>
                </div>
              </div>

              <!-- Account -->
              <div class="card" style="margin-top:18px">
                <div class="card-header"><div style="font-weight:700">Estado de cuenta</div>
                  <div><button id="accountExport" class="btn small">Exportar</button></div>
                </div>
                <div class="card-body">Saldo: <strong id="balance"> <span>—</span></strong></div>
              </div>
            </div>

            <aside class="side-col">
              <div class="card">
                <div style="font-weight:700">Notificaciones</div>
                <div id="notificationsList" class="mt-8">Cargando notificaciones...</div>
              </div>
              <div class="card" style="margin-top:18px">
                <div style="font-weight:700">Acciones rápidas</div>
                <div style="display:flex; gap:8px; margin-top:10px">
                  <button class="btn small">Inscripción</button>
                  <button class="btn outline small">Horario</button>
                </div>
              </div>
            </aside>
          </div>
        </div>
      </section>

      <!-- TEACHER DASHBOARD -->
      <section id="view-teacher" class="view" role="region" aria-label="Teacher">
        <div class="container">
          <div class="grid" style="grid-template-columns:2fr 1fr; gap:20px; margin-top:40px">
            <div class="main-col">
              <div class="card">
                <h2 style="margin:0 0 8px; font-size:22px">Panel docente</h2>
                <div class="text-muted">Herramientas para captura y gestión de grupos</div>
              </div>

              <div class="card" style="margin-top:18px">
                <div class="card-header"><div style="font-weight:700">Captura de calificaciones</div></div>
                <div class="card-body">
                  <!-- Este contenedor lo usa initTeacherCapture -->
                  <div id="teacherCapture">Cargando herramienta de captura...</div>
                </div>
              </div>

              <div class="card" style="margin-top:18px">
                <div class="card-header"><div style="font-weight:700">Reportes de grupo</div>
                  <div><button id="exportGroupReport" class="btn small">Exportar</button></div>
                </div>
                <div class="card-body" id="groupReports">Seleccione un grupo para ver desempeño.</div>
              </div>
            </div>

            <aside class="side-col">
              <div class="card">
                <div style="font-weight:700">Grupos asignados</div>
                <div id="teacherGroups" class="mt-8">Cargando grupos...</div>
              </div>
              <div class="card" style="margin-top:18px">
                <div style="font-weight:700">Acciones</div>
                <div style="display:flex; gap:8px; margin-top:10px">
                  <button class="btn small" id="openCapture">Nueva captura</button>
                  <button class="btn outline small" id="viewAttendance">Asistencia</button>
                </div>
              </div>
            </aside>
          </div>
        </div>
      </section>
    </main>

    <script src="js/api-mock.js"></script>
    <!-- jsPDF (cliente) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="js/app.js"></script>
  </div>
</body>
</html>